---
id: extend-graphql-api
title: Extend GraphQL API
sidebar_label: Extend GraphQL API
keywords: ["webiny", "continuous", "integration", "delivery", "ci", "cd", "scaffold"]
description: Learn how to set up a CI/CD pipeline for your Webiny project.
---

import CenteredImage from "@components/CenteredImage";
import ghEnvironments from "./ci-cd/gh_environments.png";
import ghActions from "./ci-cd/gh_actions_logo.png";

:::info Can I use this?

The **Extend GraphQL API** scaffold (previously GraphQL **API Package**) received a major overhaul in [Webiny 5.9.0](/docs/changelog/5.9.0). Note that this guide is not relevant for projects that are using Webiny 5.8.0 and lower.

:::

:::tip What you'll learn

- tada

:::

## Overview

The **Extend GraphQL API** scaffold extends your GraphQL API with new CRUD query and mutation operations.

Note that when we say GraphQL API, by default, we're referring to the one deployed as part of the **API** project application, located within the [`api/code/graphql`](https://github.com/webiny/webiny-js/tree/next/packages/cwp-template-aws/template/api/code/graphql) folder.

:::info
Learn more about the **API** project application on the cloud infrastructure level in the [Cloud Infrastructure](/docs/key-topics/cloud-infrastructure/api/introduction) key topics section.
:::

## Features

### New CRUD Query and Mutation Operations

The **Extend GraphQL API** extends your GraphQL API with two query and three mutation operations.

The names of these depend on the name of the initial data model, which is specified during the scaffold's setup wizard. For example, by passing **CarManufacturer** as the initial data model name, the GraphQL API will be extended with the following queries and mutations:

```graphql
type CarManufacturerQuery {
    getCarManufacturer(id: ID!): CarManufacturer
    listCarManufacturers(
        limit: Int
        before: String
        after: String
        sort: CarManufacturersListSort
    ): CarManufacturersList!
}

type CarManufacturerMutation {
    # Creates and returns a new CarManufacturer entry.
    createCarManufacturer(data: CarManufacturerCreateInput!): CarManufacturer!

    # Updates and returns an existing CarManufacturer entry.
    updateCarManufacturer(id: ID!, data: CarManufacturerUpdateInput!): CarManufacturer!

    # Deletes and returns an existing CarManufacturer entry.
    deleteCarManufacturer(id: ID!): CarManufacturer!
}

extend type Query {
    carManufacturers: CarManufacturerQuery
}

extend type Mutation {
    carManufacturers: CarManufacturerMutation
}
```

:::info
If you want to check out the full GraphQL schema that's generated during the scaffolding process, take a look at the [template](https://github.com/webiny/webiny-js/blob/next/packages/cli-plugin-scaffold-graphql-service/template/typeDefs.ts) that's used in the process.
:::

### Storing and Retrieving Data

All of the generated GraphQL queries and mutations rely on a single database for storing and retrieving data. By default, this is [AWS DynamoDB](https://aws.amazon.com/dynamodb/), which is defined in [`api/pulumi/dev/dynamoDb.ts`](https://github.com/webiny/webiny-js/blob/next/packages/cwp-template-aws/template/api/pulumi/dev/dynamoDb.ts) and [`api/pulumi/prod/dynamoDb.ts`](https://github.com/webiny/webiny-js/blob/next/packages/cwp-template-aws/template/api/pulumi/prod/dynamoDb.ts).

For all database interactions, the generated application code relies on a library called [DynamoDB Toolbox](https://github.com/jeremydaly/dynamodb-toolbox):

> The DynamoDB Toolbox is a set of tools that makes it easy to work with Amazon DynamoDB and the DocumentClient. It's designed with Single Tables in mind, but works just as well with multiple tables.

Note that if you prefer a different library, like for example the [DynamoDB Document Client](https://docs.aws.amazon.com/sdk-for-javascript/v2/developer-guide/dynamodb-example-document-client.html)), you're free to use it.

### Testing Setup

With the application code, the scaffold also generates one unit, integration, and end-to-end (E2E) test, which you can use as a reference in further development. You can also expand and adapt them to your needs.

:::info
To run the tests, Webiny relies on [Jest](/docs/key-topics/tools-libraries#testing), a JavaScript testing framework with a focus on simplicity.
:::

All of the tests can be found in the [`__tests__`](https://github.com/webiny/webiny-js/tree/v5/packages/cli-plugin-scaffold-graphql-service/template/__tests__) folder located within the scaffolded application code, where you should have the following three files.

#### [`typeDefs.unit.test.ts`](https://github.com/webiny/webiny-js/blob/v5/packages/cli-plugin-scaffold-graphql-service/template/__tests__/typeDefs.unit.test.ts)

A simple unit test that just ensures that the base GraphQL type exists. Might not be a super useful example, but still, this test is here more for awareness purposes (so that developers know these can be added too).


#### [`crud.integration.test.ts`](https://github.com/webiny/webiny-js/blob/v5/packages/cli-plugin-scaffold-graphql-service/template/__tests__/crud.integration.test.ts)

An integration test that ensures basic CRUD GraphQL query and mutation operations are working as expected. These tests are run against the application code that you have locally, but still interacts with real cloud infrastructure resources.

#### [`crud.e2e.test.ts`](https://github.com/webiny/webiny-js/blob/v5/packages/cli-plugin-scaffold-graphql-service/template/__tests__/crud.e2e.test.ts)

An integration test that ensures basic CRUD GraphQL query and mutation operations are working as expected. These tests are run against the application code that's deployed into the cloud, by issuing HTTP requests to the URL of the deployed Clou, but still interacts with real cloud infrastructure resources.


:::tip
A brief overview of different types of tests can be found in the [CI/CD / Testing](/docs/key-topics/ci-cd/testing#application-testing---a-brief-overview) key topic.
:::

### No Additional Cloud Infrastructure Resources

The scaffold does not add any additional cloud infrastructure resources. The generated code is simply added to the existing GraphQL API application code ([`api/code/graphql`](https://github.com/webiny/webiny-js/tree/v5/packages/cwp-template-aws/template/api/code/graphql)).

## Development

### First Deploy

Once you've completed the scaffold's setup wizard and the files have been generated, in order to actually see the changes made to your GraphQL API, you need to deploy them. This can be done as usual via the [`webiny deploy`](/docs/how-to-guides/deployment/deploy-your-project) command, or, even easier, if you're about to jump straight into coding, by running the [`webiny watch`](/docs/how-to-guides/webiny-cli/use-watch-command) command. This command will not only deploy the changes, but also start a new watch session, which will automatically redeploy further application code changes, as you perform them. More on this below.

### Essential Files

The following are the most essential files that are generated in the scaffolding process.

:::info
By default, all of the files are generated in a new folder, located at `api/code/graphql/src/plugins/scaffolds/graphql/{dataModelName}`, for example `api/code/graphql/src/plugins/scaffolds/graphql/carManufacturers`.
:::

[`index.ts`](https://github.com/webiny/webiny-js/blob/next/packages/cli-plugin-scaffold-graphql-service/template/index.ts)

This is the entrypoint file, which exports the [`GraphQLSchemaPlugin`](https://github.com/webiny/webiny-js/blob/v5/packages/handler-graphql/src/plugins/GraphQLSchemaPlugin.ts) plugin, which is responsible for extending the existing GraphQL API's schema, using new [type definitions](https://github.com/webiny/webiny-js/blob/next/packages/cli-plugin-scaffold-graphql-service/template/index.ts#L13) and supporting [resolvers](https://github.com/webiny/webiny-js/blob/next/packages/cli-plugin-scaffold-graphql-service/template/index.ts#L14-L25).

[`typeDefs.ts`](https://github.com/webiny/webiny-js/blob/next/packages/cli-plugin-scaffold-graphql-service/template/typeDefs.ts)

A file that contains the schema with which we are extending our GraphQL API. This will usually be the starting point if you wanted to make further changes to the generated code, for example adding new fields to the initial data model, adding new GraphQL query or mutation operations and more.

Note that in the case of the latter, you will also need to define a standalone resolver function that will be responsible for handling newly added query or mutation operation.

[`resolvers/`](https://github.com/webiny/webiny-js/tree/next/packages/cli-plugin-scaffold-graphql-service/template/resolvers)

This folder contains the GraphQL resolver classes that support the generated [query](https://github.com/webiny/webiny-js/blob/next/packages/cli-plugin-scaffold-graphql-service/template/resolvers/TargetDataModelsQuery.ts) and [mutation](https://github.com/webiny/webiny-js/blob/next/packages/cli-plugin-scaffold-graphql-service/template/resolvers/TargetDataModelsMutation.ts) GraphQL operations.

These will need be updated as you make changes in the mentioned [`typeDefs.ts`](https://github.com/webiny/webiny-js/blob/next/packages/cli-plugin-scaffold-graphql-service/template/typeDefs.ts) file. For example, if you were to introduce a new `listNewCarManufacturers` GraphQL query, the same `listNewCarManufacturers` method would need to be defined within the [`CarManufacturersQuery`](https://github.com/webiny/webiny-js/blob/next/packages/cli-plugin-scaffold-graphql-service/template/resolvers/TargetDataModelsQuery.ts) class.

[`entities/`](https://github.com/webiny/webiny-js/tree/next/packages/cli-plugin-scaffold-graphql-service/template/entities)

Contains DynamoDB Toolbox entities, which are used within GraphQL resolver functions. You are free to add additional entities, or modify the existing one (for example - adding new entity attributes).

[`__tests__/`](https://github.com/webiny/webiny-js/tree/next/packages/cli-plugin-scaffold-graphql-service/template/__tests__)

Contains tests that ensure your application code is working as expected. As mentioned, three tests are included by default, one unit, one integration, and one end-to-end (E2E) test.

### Development Using the Watch Command

### Writing and Executing Tests

### Test-Driven Development (TDD)

## FAQ

#### I need more flexibility when it comes to data querying. Can I bring in a different database, for example ElasticSearch?
